<div class="curso-detalle-container">
  @if (curso()) {
    <div class="curso-header">
      <button class="btn-back" (click)="volverAMisCursos()">â† Volver a Mis Cursos</button>
      <h1>{{ curso()!.titulo }}</h1>
      <p class="instructor">ğŸ‘¨â€ğŸ« {{ curso()!.instructor }}</p>
      <div class="progreso-container">
        <div class="progreso-barra">
          <div class="progreso-fill" [style.width.%]="progreso()"></div>
        </div>
        <span>{{ progreso() }}% completado</span>
      </div>
    </div>

    <div class="curso-contenido">
      <aside class="lecciones-sidebar">
        <h3>ğŸ“š Contenido</h3>
        <ul class="lecciones-lista">
          @for (leccion of curso()!.lecciones; track leccion.id) {
            <li 
              [class.activa]="leccionActual()?.id === leccion.id"
              [class.completada]="leccion.completada"
              (click)="seleccionarLeccion(leccion)">
              <span>{{ leccion.completada ? 'âœ…' : 'â­•' }}</span>
              <div>
                <h4>{{ leccion.titulo }}</h4>
                <small>â±ï¸ {{ leccion.duracion }}</small>
              </div>
            </li>
          }
        </ul>
      </aside>

      <main class="leccion-contenido">
        @if (leccionActual()) {
          <div class="video-placeholder">
            <div class="video-icon">ğŸ¥</div>
            <p>{{ leccionActual()!.titulo }}</p>
          </div>

          <h2>{{ leccionActual()!.titulo }}</h2>
          <button 
            class="btn-completar"
            [class.completada]="leccionActual()!.completada"
            (click)="marcarComoCompletada(leccionActual()!)">
            {{ leccionActual()!.completada ? 'âœ… Completada' : 'â­• Marcar completada' }}
          </button>

          <p>{{ leccionActual()!.contenido }}</p>

          <div class="navegacion">
            <button (click)="leccionAnterior()" [disabled]="curso()!.lecciones[0].id === leccionActual()!.id">
              â† Anterior
            </button>
            <button (click)="siguienteLeccion()" [disabled]="curso()!.lecciones[curso()!.lecciones.length - 1].id === leccionActual()!.id">
              Siguiente â†’
            </button>
          </div>
        }
      </main>
    </div>
  } @else {
    <div class="no-encontrado">
      <h2>Curso no encontrado</h2>
      <button routerLink="/mis-cursos">Volver</button>
    </div>
  }
</div>
